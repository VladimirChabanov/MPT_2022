# Практическое задание 1. Изучение базовых возможностей OC Linux

**Цель:** Освоить основные возможности консоли OC семейства Linux. Изучить базовый набор команд для работы с OC Ubuntu. Познакомится с фундаментальными концепциями используемыми в ОС семейства Linux.

## Теоретическая часть

## Задания к практической работе

Каждую выполненную вам команду и результат её работы поместите в отчёт в виде скриншота.

### Установка

1. Скачайте и установите [VitrualBox](https://www.virtualbox.org/).  
   Для работы этой программы может потребоваться включить аппаратную виртуализацию в настройках BIOS вашего компьютера;
2. Создайте новую виртуальную машину и установите Ubuntu Server. Образ можно скачать на официальном [сайте](https://ubuntu.com/server) и там же указаны минимальные [системные требования](https://ubuntu.com/server/docs/installation). В процессе установки можно оставить настройки по умолчанию. Инструкцию с комментариями по каждому шагу можно найти тут: https://losst.pro/ustanovka-ubuntu-server-20-04. На данный момент доступна версия 22.04 LTS, но в процессе установки нет серьёзных отличий от инструкции:
   - В процессе создания виртуальной машины установите галочку "Пропустить автоматическую установку", для того, чтобы иметь возможность выполнить конфигурирование сервера. Кроме того, в некоторых случаях, автоматическая установка может привести к проблемам в работе ОС (возможно какой-то баг);
   - Размер виртуального диска установите побольше (50+ ГБ). Реально он столько не займёт, а будет расширятся по мере необходимости вплоть до указанного значения. Если указать слишком маленький размер, то это может привести к проблемам в будущем, т.к. увеличить объём уже созданного виртуального диска не очень просто.
   - После шага 6, в указанной выше инструкции, пропущен выбор типа установки "Ubuntu Server" или "Ubuntu Server (minimized)", второй вариант предусматривает использование в контейнерах и виртуальных машинах, не подразумевающих интерактивный вход и ручное управление. Это значит, что в такой системе отсутствуют утилиты ручного управления и если вы все-таки захотите администрировать ее руками, то вам придется развернуть ее до уровня Ubuntu Server. Поэтому здесь оставляем Ubuntu Server.
   - На шаге 7, настройки сетевого подключения менять не нужно.
   - На шаге 9, указывается альтернативный адрес (зеркало) репозитория пакетов. Он будет использоваться, когда вы попробуете установить какую-нибудь программу. Т.к. мы под санкциями, то не все репозитории пакетов будут работать, поэтому, на всякий случай, можно указать там репозиторий Яндекса:  
     ```
     http://mirror.yandex.ru/ubuntu
     ```
   
     или хотя бы проверить, что указан поддомен "ru":
     ```
     http://ru.archive.ubuntu.com/ubuntu
     ```
   - На шаге 10, можно ничего не менять, а оставить "Use an entire disk".
   - На шаге 11, придумайте **уникальное** имя пользователя (username) и установите простой пароль (например: 123).
   - На следующих шагах можно оставлять значения по умолчанию.
3. После установки, перезагрузите сервер и залогиньтесь используя имя пользователя и пароль указанные в процессе установки.  
   Вся дальнейшая работа будет проходить в консольном режиме.
4. Чтобы получить справочную информацию по команде или программе можно воспользоваться командой `man` или запустить команду с опцией `--help`. Как правило вы будете получать ответ на английском языке. Чтобы прочитать ту же информацию на русском можно воспользоваться [сайтом](https://www.opennet.ru/man.shtml).

### Работа с файлами и каталогами

5. Ознакомьтесь с возможностями команды `pwd` c помощью команды `man`;

6. Используйте команду `pwd`, чтобы определить каталог в котором вы находитесь. Обычно, сразу после того, как вы залогинились, вы будете в домашнем каталоге пользователя;

7. Ознакомьтесь с возможностями команды `cd` c помощью опции `--help`;

8. Перейдите в корневой каталог командой `cd /`.  
   В системах семейства Linux есть только один корневой каталог и путь к нему `/`. Полный путь к любому файлу так или иначе начинается с символа `/`.  В Windows нет единого корня, а каждый диск формирует свой корневой каталог (`C:\`, `D:\` и т.д.) и соответственно полные пути к файлам начинаются с них;

9. Ознакомьтесь с возможностями команды `ls` c помощью команды `man`;

10. Просмотрите содержимое корневого каталога командой `ls`;

11. Вернитесь в домашний каталог, используя команду `cd` без параметров (или с параметром `~`).  
    Символ `~` можно применять не только с командой `cd`, но и при указании пути к файлу в принципе, он автоматически будет заменён на путь к домашнему каталогу текущего пользователя;

12. Ознакомьтесь с возможностями команды `mkdir` c помощью команды `man`;

13. Введите команду `mkdir project`, чтобы создать каталог "project" в текущей директории.  
    Если вам нужен каталог имя которого содержит пробел (например "dir 1"), то это имя нужно будет заключить в кавычки (`mkdir "dir 1"`), если этого не сделать, будут созданы 2 каталога (с именем "dir" и "1");

14. Перейдите в каталог "project", используя команду `cd`;

15. Создайте каталог "app", используя команду `mkdir`;

16. Просмотрите содержимое текущего каталога, используя команду `ls`;

17. Ознакомьтесь с возможностями команды `touch` c помощью команды `man`;

18. Введите команду `touch app/main.py`, чтобы создать пустой файл "main.py" в каталоге "app" не переходя туда.  
    В команде был использован относительный путь к файлу. Т.е. реальный путь к файлу определяется относительно текущей директории. Т.к. сейчас вы находитесь в "\~/project", то путь к создаваемому файлу будет "\~/project/app/main.py". 

19. Ознакомьтесь с возможностями команды `mv` c помощью команды `man`;

20. Переименуйте файл "main.py" в "app.py" используя команду `mv`.  
    Вы по прежнему находитесь в "\~/project", поэтому указывайте пути к исходному и конечному файлам с учётом этого;

21. Ознакомьтесь с возможностями команды `cp` c помощью команды `man`;

22. Скопируйте файл "app.py" в текущий каталог под именем "copy.txt", используя команду `cp`.  
    После выполнения этой команды у вас должна быть такая структура файлов:  

    ```bash
    project
    ├───app
    │   └───app.py
    └───copy.txt
    ```

23. Создайте каталог "static" в каталоге "app", используя команду `mkdir`.  
    Вы по прежнему находитесь в "\~/project";

24. Перейдите в каталог "static" используя команду `cd` один раз. Т.е не `cd app`, а затем `cd static`, а за один раз;

25. Ознакомьтесь с возможностями текстового редактора `nano` (или другого консольного текстового редактора) c помощью команды `man`;  

26. Используя текстовый редактор создайте файл "index.html" со следующим содержимым:  
    ```html
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Document</title>
    </head>
    <body>
        <h1>Hello, World!</h1>
    </body>
    </html>
    ```

27. Вы сейчас находитесь в каталоге "\~/project/app/static". При помощи команды `cd ../..` прейдите в каталог "\~/project" и создайте там файл "config.py".

28. Используя текстовый редактор запишите в файл следующий текст:

    ```
    numlock = False
    break = True
    dos = [high, umb]
    files = 40
    device1 = "/dos/himem.sys"
    device2 = "/dos/emm386 ram i=b000-b7ff"
    shell = "command.com -p -e:512"
    ```

29. Ознакомьтесь с возможностями команды `cat` c помощью команды `man`;

30. Выведите на экран содержимое файла "config.py" c помощью команды `cat`;

31. Ознакомьтесь с возможностями команды `grep` c помощью команды `man`;

32. Введите команду `cat config.py | grep device`, чтобы найдите все строки содержащие слово "device" в файле "config.py".  
    Здесь сначала выполняется команды `cat config.py`, которая читает файл и выводит его содержимое, но прежде, чем оно попадёт на экран мы перенаправляем весь вывод на вход следующей команде. В данном случае это команда `grep` (хотя может быть любая другая). Команда   `grep` выполняет поиск символов "device" в том тексте который поступил ей на вход и выводит на экран совпадения.  
    С тем же успехом `grep`-у можно было передать на вход текстовый вывод от любой другой команды (например от `ls`).

33. Вернитесь в домашний каталог;

34. Ознакомьтесь с возможностями команды `find` c помощью команды `man`. С практической точки зрения полезнее будет изучить информацию с [этого сайта](https://losst.pro/komanda-find-v-linux);

35. Найдите все файлы с расширением "py" расположенные в домашнем каталоге пользователя и его подкаталогах c помощью команды `find`. Вывод команды [перенаправьте](https://losst.pro/perenapravlenie-vvoda-vyvoda-linux) в файл "files.txt";

36. Проверьте, что в текущей директории появился файл "files.txt" и в нём указаны пути к 2-м файлам с расширением "py".

37. Найдите все файлы в системе предлежащие вашему пользователю при помощи команды `find` и замените содержимое файла "files.txt" списком этих файлов;  
    В процесс поиска будет множество сообщений "Permission denied" (В доступе отказано), т.к. `find` попробовала прочитать содержимое каталогов к которым у вашего пользователя нет прав доступа. Этот вывод не попадёт файл, т.к. он относится к потоку ошибок. Чтобы ошибки не выводились на экран их тоже можно перенаправить либо в другой файл либо в специальное устройство `/dev/null`. Чтобы это сделать допишите к команде `2>/dev/null`. Цифра 2 - это номер перенаправляемого потока;

38. Ознакомьтесь с возможностями команды `head` c помощью команды `man`;

39. Изучите содержимое файла "files.txt" c помощью команды `head`;

40. Ознакомьтесь с возможностями команды `tail` c помощью команды `man`;

41. Изучите содержимое файла "files.txt" c помощью команды `tail`;

42. На данный момент вы должны находится в домашнем каталоге у вас должна быть такая структура файлов:  

    ```bash
    ~
    ├───files.txt
    └───project
        ├───app
        │   ├───app.py
        │   └───static
        │       └───index.html
        ├───config.py
        └───copy.txt
    ```

43. Ознакомьтесь с возможностями команды `ln` c помощью команды `man`. Узнайте, чем жёсткая ссылка отличается от символической;

44. В текущем каталоге создайте жесткую ссылку "link" на файл "config.py" из каталога "project" используя команду `ln`;

45. В текущем каталоге создайте символическую ссылку "simlink" на файл "config.py" из каталога "project" используя команду `ln`;

46. Просмотрите что у вас в текущем каталоге при помощи команды `ls` с параметрами `-l`.  
    Здесь параметр `-l` указывает, что вывод должен быть в расширенном (long) виде;

47. Используйте ссылки, чтобы посмотреть содержимое файла "config.py". Каждая из них должна давать такую возможность.

48. Удалите файл "config.py" из каталога "project" при помощи команды `rm`;

49. Используйте ссылки, чтобы посмотреть содержимое файла "config.py". В данном случае символическая ссылка должна показать ошибку, а жёсткая должна отработать так же хорошо как и до удаления "config.py".

50. Просмотрите что у вас в текущем каталоге при помощи команды `ls` с параметрами `-l`.  
    Вы должны обнаружить, что подсветка символической ссылки изменила свой цвет на красный.

51. Команда `ls -l` отображает не все файлы которые существуют в каталоге. Например те, которые начинаются на точку считаются системными и поэтому не выводятся. Добавьте параметр `-a`, чтобы получить полный список.  
    Односимвольные параметры можно комбинировать, при этом порядок следования параметров не имеет значения. Т.е `ls -a -l`, `ls -la` и `ls -al` - это одно и то же.

52. Удалите созданные в ходе работы файлы и папки используя команду `rm`;

### Управление пользователями и правами

53. Ознакомьтесь с возможностями команды `sudo ` c помощью команды `man`;
54. Ознакомьтесь с возможностями команды `adduser ` c помощью команды `man`;
55. Создайте нового пользователя "alice" при помощи команды `adduser`. На все вопросы, кроме пароля можно отвечать нажатием Enter;
56. Ознакомьтесь с возможностями команды `passwd ` c помощью команды `man`;
57. Установите пользователю "alice" пароль "1234" с помощью команды `passwd`;
58. Аналогичным образом создайте пользователя "bob";
59. Ознакомьтесь с возможностями команды `su ` c помощью команды `man`;
60. Откройте 2-е дополнительные консоли (`[Alt]+[F2]` и `[Atl]+[F3]` соответственно). Залогиньтесь в обеих под своим основным пользователем.  
    Переключаться между ними можно при помощи комбинации `[Alt]+[F{Номер консоли}]`.
61. Во второй консоли перейдите под пользователя "alice", а в третьей под пользователя "bob" при помощи команды `su`;
62. В первой консоли залогиньтесь под суперпользователем (root) при помощи `sudo su -`;
63. Ознакомьтесь с возможностями команды `chmod ` c помощью команды `man`;
64. Из терминала "root" выполните команду `chmod 755 /home/alice /home/bob`.  
    Здесь мы изменяем права доступа к домашним каталогам пользователей на `rwxr-xr-x`. Т.е. пользователи, которые владеют данными каталогами могут делать всё что хотят, а остальные только смотреть, что есть в каталоге и заходить в них, но создавать/удалять файлы им запрещено.
65. Посмотрите права установленные для каталогов "/home/alice" и "/home/bob" при помощи команды `ls -al /home`. То есть мы смотрим содержимое каталога "/home" в расширенном виде;
66. Из терминала "bob" попробуйте войти в каталог "/home/alice".
67. Из терминала "alice" измените права доступа к каталогу "/home/alice" на 700.  
    Т.е. мы разрешаем доступ к каталогу только его хозяину (в данном случае пользователю "alice"), а все остальные не могут даже посмотреть что в этом каталоге есть (кроме "root", который может всё).
68. Посмотрите права установленные для каталога "/home/alice";
69. Из терминала "bob" выйдите, а затем снова попробуйте войти в каталог "/home/alice".  
    Т.к. "bob" не является владельцем этого каталога, вы должны получить сообщение "Permission denied";
70. Попробуйте перейти в "/home/alice" из терминала с root;
71. Из терминала root создайте файл "file1.txt" с содержимым "made by root" в каталоге "/home/alice".  
    Например так: ` echo "made by root" > /home/alise/file1.txt`.
72. Из терминала "alice" посмотрите права и владельца только что созданного файла "file1.txt" . Попробуйте прочитать содержимое файла, а затем изменить его.
73. Ознакомьтесь с возможностями команды `chown ` c помощью команды `man`;
74. Из терминала root измените владельца файла "file1.txt" на "alice";
75. Из терминала "alice" попробуйте изменить "file1.txt", а затем удалите его.
76. Из терминала root создайте каталог "/var/share";
77. Установите ему права доступа 770.  
    Здесь разрешаются все действия для владельца директории и для членов группы к которой принадлежит директория. Для пользователей не являющихся владельцем и не входящим в указанную группу запрещены любые действия.
78. Посмотрите права установленные для каталога "/var/share", а также владельца и группу к которой принадлежит каталог.
79. Ознакомьтесь с возможностями команды `groupadd ` c помощью команды `man`;
80. Создайте группу "project" с помощью команды `groupadd`;
81. Проверьте, что группа действительно создана при помощи просмотра файла `/etc/group`;
82. Ознакомьтесь с возможностями команды `usermod` c помощью команды `man`;
83. Добавьте пользователей "alice" и "bob" в группу "project" (как их дополнительную группу) при помощи команды `usermod` с ключами `-a` и `-G`. Ключ `-G`, заменяет доп. группы, в которых состоит, пользователь на указанные. Ключ `-a`, меняет поведение ключа `-G` на добавление групп вместо замены.
84. Ознакомьтесь с возможностями команды `chgrp` c помощью команды `man`;
85. Измените группу для каталога `/var/share/` на "project" при помощи команды `chgrp`;
86. Проверьте, что группа действительно поменялась;
87. Из терминала "alice" попробуйте перейти в каталог `/var/share/`. Сейчас это не должно получиться. Чтобы изменения вступили в силу, нужно перелогинится.
88. Используйте `exit` в терминалах "alice" и "bob", чтобы разлогиниться. Затем снова зайдите под этими пользователями.  
    После того, как вы напишите `exit` в каждой консоли вы не разлогинетесь полностью, а вернётесь обратно под основного пользователя, т.к. вы использовали команду `su` для перехода под "alice" и "bob". Если теперь написать `exit` ещё раз, то вы разлогинетесь совсем (также можно использовать команду `logout`);
89. Перейдите в каталог `/var/share/` в каждом терминале.
90. Из терминала "alice" создайте файл "alice_file.txt" с любым текстом.
91. Из терминала "bob" попробуйте изменить файл "alice_file.txt".
92. Проверьте права доступа к файлу. Как видно, несмотря на то, что каталог и оба пользователя состоят в группе "project" файлы по прежнему создаются с основной группой пользователя.
93. Изучите материал касающийся расширенных разрешений: https://habr.com/ru/post/469667/
94. В терминале "root" воспользуетесь командой `chmod g+s /var/share/`;
95. Посмотрите, что стало с правами доступа к этому каталогу;  
    Нас интересует вторая тройка прав, та которая относится к группе.
96. Из терминала "alice" создайте файл "common_file.txt" с любым текстом и проверьте права доступа к файлу.
97. Из терминала "bob" попробуйте изменить файл "common_file.txt".  
    Теперь у вас должно это получится, т.к. файл созданный из под пользователя "alice" теперь находится в группе "project" в которой состоит и "bob";
98. Ознакомьтесь с возможностями команды `gpasswd` c помощью команды `man`;
99. Удалите пользователей "alice" и "bob" из группы "project" при помощи команды `gpasswd` с ключом `-d`;
100. Ознакомьтесь с возможностями команды `groupdel` c помощью команды `man`;
101. Удалите группу "project" при помощи команды `groupdel`;
102. Ознакомьтесь с возможностями команды `deluser` c помощью команды `man`;
103. Удалите пользователей "alice" и "bob" с помощью команды `deluser`;

### Установка удаление программ (пакетов)

104. Вернитесь под своего основного пользователя и перейдите в вашу домашнюю директорию;
105. Ознакомьтесь с возможностями командой `apt` c помощью команды `man`;
106. Ознакомьтесь с возможностями командой `apt-get` c помощью команды `man`;
107. Выполните команду `apt-get update`. Здесь и далее может потребоваться ввести `sudo` перед командой. Следите за сообщениями об ошибках в терминале.  
     Эта команда приведёт к тому, что будут обновлены индексные файлы пакетов, т.е. вы получите информацию о свежих версиях программ и возможность их скачать.

108. Выполните команду `apt-get upgrade`.  
     Эта команда обновит уже установленные пакеты. Может выполняться довольно долго;

109. Установите пакет "cowsay" при помощи команды `apt install cowsay`;
110. Проверьте, что пакет установился нормально при помощи команды: `cowsay hi`. Должна появится корова говорящая "hi";
111. Удалите пакет "cowsay" при помощи команды `apt remove cowsay` и убедитесь, что теперь корова не появляться.
113. Ознакомьтесь с возможностями системы контроля версий git:

   - [Плейлист](https://youtube.com/playlist?list=PLDyvV36pndZFHXjXuwA_NywNrVQO0aQqb) - довольно подробный курс по git. Новичкам смотреть выборочно (только то, что нужно в данный момент). Если смотреть "залпом" можно запутаться, т.к. автор рассказывает очень подробно ,в том числе и  о некоторых тонких моментах, которые не нужны для начинающих.

   - [GitHowTo](https://githowto.com/ru) - пошаговый интерактивный тур по git на примере мини-проекта.

   - [Официальный мануал](https://git-scm.com/book/ru/v2).

113. Посмотрите список установленных пакетов командой `apt list --installed`;
114. Используйте предыдущую команду и команду `grep`, чтобы определить установлен ли пакет `git`;
115. Установите (если нет) утилиту git при помощи команды `apt-get install git`. Другие способы установки можно найти на [официальном сайте](https://git-scm.com/);
116. Проверьте корректность установки командой `git --version`;
117. Выполните первоначальную настройку git (имя пользователя и e-mail) как указано в одном из предыдущих источников. Можно указывать любые данные, но уникальные (это будет важно в дальнейшем).
118. Убедитесь в наличии интерпретатора python при помощи команды: `python3 --version`. Если он отсутствует, то установите используя утилиту `apt` - [видео](https://youtu.be/3ai-ZyffnWY).
119. При необходимости ознакомьтесь с базовыми возможностями языка python - [плейлист](https://youtube.com/playlist?list=PLA0M1Bcd0w8xIdFNA95aQrwJ_GQJEV8ko).
120. Установите менеджер пакетов python pip при помощи команды `apt-get install python3-pip`.
121. Установите пакет для создания виртуальных окружений python venv при помощи команды `apt-get install python3-venv`.
122. Изучите возможности pip и venv - [видео](https://youtu.be/rsG1Y5k-9jo).
123. Клонируйте репозиторий https://github.com/VladimirChabanov/google.git при помощи команды `git clone https://github.com/VladimirChabanov/google.git` в домашний каталог. 
124. Перейдите в только что созданные каталог google.
125. Создайте в этом каталоге виртуальное окружение командой `python3 -m venv venv`.
126. Активируйте виртуальное окружение командой `source ./venv/bin/activate`.
127. Установите все зависимости перечисленные в файле requirements.txt при помощи команды `pip install -r requirements.txt`.
128. Проверьте работоспособность приложения командой `python main.py`. Запрос введите по своему усмотрению.
129. Деактивируйте виртуальное окружение командой `deactivate`.
130. Удалите каталоги venv и .git командой `rm -rf venv` и `rm -rf .git` соответственно.

## Полезные ссылки

## Вопросы к практическому заданию

Ответы на следующие вопросы поместите в отчёт:

1. Чем отличается вывод команд `ls -F` и `ls -la`?
2. С помощью какой команды и как можно переместить файл в другой каталог?
3. Какие действия вы совершаете, нажимая на кнопки "стрелка вверх" и "стрелка вниз" в терминале?
4. Куда вы переходите, выполнив команду `cd` без параметров?
5. Как осуществить вывод содержимого каталога с запятыми в качестве разделителя?
6. Как осуществить создание нового каталога и необходимых подкаталогов рекурсивно?
7. Как осуществить рекурсивное копирование всех файлов из одного каталога в другой?
8. Как осуществить рекурсивное копирование всех файлов и подкаталогов из одного каталога в другой?
9. Должен ли пользователь root вводить старый пароль при его смене с помощью команды `passwd`?
10. Что будет, если выполнить команду (от имени root): `usermod -G "" user2`?
11. Можно ли назначить своей учётной записи права пользователя root. А затем удалить пользователя root из системы?
12. Сколько времени по умолчанию команда `sudo` помнит введённый пароль?
13. Достаточно ли запретить доступ на запись в файл, чтобы предотвратить возможность удаления файла? Если нет, тогда как это сделать?
14. Как можно узнать права доступа к файлу/каталогу?
15. Какие права доступа нужно установить каталогу, чтобы все вновь созданные файлы и каталоги в нём получали группу этого каталога?

## Отчёт

Оформите отчёт в соответствии с шаблоном и загрузите его в элемент Задание с номером работы в мудле.